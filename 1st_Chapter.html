<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICAB Accounting Exam â€“ Chapter 1: Introduction to accounting</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .question-tracker-item {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .question-tracker-item:hover {
            transform: scale(1.1);
        }
        .option-label {
            cursor: pointer;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease-in-out;
            display: flex;
            align-items: center;
        }
        .option-label:hover {
            background-color: #f1f5f9;
        }
        .option-label.selected {
            background-color: #e0f2fe;
            border-color: #0ea5e9;
        }
        .option-input:checked + .option-label {
            background-color: #e0f2fe;
            border-color: #0ea5e9;
        }
        .explanation {
            background-color: #f8fafc;
            border-left: 4px solid #fbbf24;
        }
        .correct-answer {
            background-color: #dcfce7;
            border-color: #22c55e;
        }
        .incorrect-answer {
            background-color: #fee2e2;
            border-color: #ef4444;
        }
        .user-selection {
             border: 2px solid #3b82f6;
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <div id="quiz-container" class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <h1 class="text-2xl sm:text-3xl font-bold text-center text-slate-900 mb-6">ICAB Accounting Exam â€“ Chapter 1: Introduction to accounting</h1>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">

            <!-- Left Side: Question Tracker -->
            <div class="lg:col-span-3 bg-white p-4 rounded-lg shadow-md h-fit">
                <h2 class="text-lg font-semibold mb-4 text-slate-700">Question Tracker</h2>
                <div id="question-tracker" class="grid grid-cols-5 sm:grid-cols-10 lg:grid-cols-5 gap-2">
                    <!-- Tracker items will be generated by JS -->
                </div>
            </div>

            <!-- Center & Right Side: Question and Timer -->
            <div class="lg:col-span-9">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <!-- Header: Timer and Flag -->
                    <div class="flex justify-between items-center mb-6 border-b pb-4">
                        <div id="timer" class="text-xl font-bold text-sky-600">
                            Time Left: 45:00
                        </div>
                        <button id="flag-btn" class="px-4 py-2 rounded-md bg-amber-100 text-amber-700 hover:bg-amber-200 transition">
                            ðŸš© Flag for Review
                        </button>
                    </div>

                    <!-- Question Display -->
                    <div id="question-display">
                        <!-- Question content will be generated by JS -->
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="flex justify-between mt-8">
                        <button id="prev-btn" class="px-6 py-2 rounded-md bg-slate-200 hover:bg-slate-300 transition disabled:opacity-50">Previous</button>
                        <button id="next-btn" class="px-6 py-2 rounded-md bg-sky-600 text-white hover:bg-sky-700 transition">Next</button>
                    </div>
                </div>
                 <!-- Submit Button -->
                <div class="mt-6 text-center">
                    <button id="submit-btn" class="w-full sm:w-auto px-10 py-3 rounded-lg bg-green-600 text-white font-bold hover:bg-green-700 transition shadow-lg">Submit Quiz</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Container -->
    <div id="results-container" class="hidden max-w-5xl mx-auto p-4 sm:p-6 lg:p-8 bg-white rounded-lg shadow-xl my-10">
        <h1 class="text-3xl font-bold text-center text-slate-900 mb-2">Quiz Results</h1>
        <p class="text-center text-slate-500 mb-6" id="difficulty-indicator">Quiz Difficulty: <strong>Tricky</strong></p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center mb-8">
            <div class="bg-sky-100 p-4 rounded-lg">
                <p class="text-lg font-semibold">Total Score</p>
                <p id="total-score" class="text-3xl font-bold text-sky-700"></p>
            </div>
            <div class="bg-green-100 p-4 rounded-lg">
                <p class="text-lg font-semibold">Correct Answers</p>
                <p id="correct-answers" class="text-3xl font-bold text-green-700"></p>
            </div>
            <div class="bg-red-100 p-4 rounded-lg">
                <p class="text-lg font-semibold">Incorrect Answers</p>
                <p id="incorrect-answers" class="text-3xl font-bold text-red-700"></p>
            </div>
        </div>

        <div class="mb-8">
            <h2 class="text-xl font-semibold mb-3 text-slate-800">Performance Analysis</h2>
            <div class="bg-slate-50 p-4 rounded-lg">
                <p class="mb-2"><strong>Percentage Correct:</strong> <span id="percentage-correct"></span></p>
                <p><strong>Percentage Incorrect:</strong> <span id="percentage-incorrect"></span></p>
            </div>
        </div>

        <div class="mb-8">
            <h2 class="text-xl font-semibold mb-3 text-slate-800">Areas for Improvement</h2>
            <div id="improvement-areas" class="bg-amber-50 p-4 rounded-lg text-amber-800">
                <!-- Improvement topics will be generated by JS -->
            </div>
        </div>

        <div>
            <h2 class="text-2xl font-bold mb-4 text-slate-800">Review Answers</h2>
            <div id="answer-review" class="space-y-6">
                <!-- Detailed answer review will be generated by JS -->
            </div>
        </div>

        <div class="text-center mt-10">
            <button id="retake-btn" class="px-10 py-3 rounded-lg bg-sky-600 text-white font-bold hover:bg-sky-700 transition shadow-lg">Retake Quiz</button>
        </div>
        
        <div class="mt-12 pt-6 border-t text-center text-sm text-slate-500">
            <p class="font-semibold">Prepared by:</p>
            <p>ðŸ”— <a href="https://www.linkedin.com/in/k-m-mahafuzul-alam" target="_blank" class="text-sky-600 hover:underline">linkedin.com/in/k-m-mahafuzul-alam</a></p>
            <p>ðŸ“ž WhatsApp: 01728-928984</p>
            <p>ðŸ“§ Email: kmmhafuzulalam@gmail.com</p>
        </div>
    </div>


    <script>
        const quizData = [
            // Questions based on Chapter 1: Introduction to accounting
            {
                question: "According to the Conceptual Framework, who are the primary users of general purpose financial statements?",
                options: [
                    "Managers and government agencies",
                    "Existing and potential investors, lenders and other creditors",
                    "The general public and employees",
                    "Tax authorities and regulatory bodies"
                ],
                answer: ["B"],
                type: "single",
                topic: "Purpose of accounting information",
                explanation: "The Conceptual Framework (para. 1.2) explicitly identifies existing and potential investors, lenders, and other creditors as the primary users for whom general purpose financial reports are prepared. Their decisions involve providing resources to the entity."
            },
            {
                question: "Which of the following statements best describes the 'true and fair view' concept in the context of financial reporting in Bangladesh?",
                options: [
                    "The financial statements are 100% accurate and free from any error or estimation.",
                    "The financial statements comply with all provisions of the Companies Act, 1994 and present a faithful representation of the company's financial position and performance.",
                    "The financial statements are prepared solely for the purpose of tax assessment by the National Board of Revenue (NBR).",
                    "The financial statements prioritize the information needs of management over external stakeholders."
                ],
                answer: ["B"],
                type: "single",
                topic: "Regulation of accounting",
                explanation: "The 'true and fair view' is a fundamental concept. In Bangladesh, this means the financial statements must comply with the Companies Act, 1994, and relevant IFRS/IAS as adopted by ICAB (known as BFRS/BAS), ensuring they faithfully represent the entity's transactions and financial health."
            },
            {
                question: "A company purchases a new delivery van for BDT 2,500,000. It also pays BDT 50,000 for road tax for the first year and BDT 25,000 to have the company logo painted on the van. Which of these amounts should be classified as capital expenditure?",
                options: [
                    "BDT 2,500,000 only",
                    "BDT 2,550,000",
                    "BDT 2,525,000",
                    "BDT 2,575,000"
                ],
                answer: ["C"],
                type: "single",
                topic: "Capital and revenue items",
                explanation: "Capital expenditure includes the acquisition cost of a non-current asset and any costs incurred to bring it to its working condition for its intended use. The purchase price (BDT 2,500,000) and the cost of painting the logo (BDT 25,000) are capital expenditures. The road tax (BDT 50,000) is a revenue expenditure as it relates to a specific period (one year) and does not enhance the asset's earning capacity."
            },
            {
                question: "Which of the following are considered 'enhancing' qualitative characteristics of useful financial information according to the Conceptual Framework? (Choose MULTIPLE correct answers)",
                options: [
                    "Relevance",
                    "Comparability",
                    "Timeliness",
                    "Faithful Representation"
                ],
                answer: ["B", "C"],
                type: "multiple",
                topic: "Qualitative characteristics",
                explanation: "The Conceptual Framework identifies four enhancing qualitative characteristics: Comparability, Verifiability, Timeliness, and Understandability. Relevance and Faithful Representation are the two fundamental qualitative characteristics."
            },
            {
                question: "The 'going concern' concept assumes that the entity will continue in operation for the foreseeable future, which is at least, but not limited to, the next ______ months from the end of the reporting period.",
                options: [
                    "6",
                    "12",
                    "18",
                    "24"
                ],
                answer: ["B"],
                type: "fill",
                topic: "Accounting concepts and conventions",
                explanation: "IAS 1 specifies that when assessing the going concern assumption, management must take into account all available information for at least, but not limited to, twelve months from the end of the reporting period."
            },
            {
                question: "The formation of the International Sustainability Standards Board (ISSB) aims to provide information primarily focused on the needs of:",
                options: [
                    "Environmental activist groups",
                    "Governments for policy making",
                    "Investors and the financial markets",
                    "Employees and trade unions"
                ],
                answer: ["C"],
                type: "single",
                topic: "Sustainability and sustainability standards",
                explanation: "The aim of the IFRS Sustainability Disclosure Standards issued by the ISSB is to provide high-quality, transparent, and comparable information focused on the needs of investors and the financial markets to help them understand an entity's sustainability-related risks and opportunities."
            },
            {
                question: "A business pays BDT 120,000 for a one-year insurance policy on July 1, 2024. Its financial year ends on December 31, 2024. Under the accrual basis of accounting, what is the insurance expense for the year ended December 31, 2024?",
                options: [
                    "BDT 120,000",
                    "BDT 60,000",
                    "BDT 10,000",
                    "BDT 0"
                ],
                answer: ["B"],
                type: "calculation",
                topic: "Accounting concepts and conventions",
                explanation: "The accrual concept requires matching expenses to the period in which they are incurred. The insurance policy covers 12 months. For the year ending Dec 31, 2024, only 6 months of insurance has been used (July to Dec). Therefore, the expense is (BDT 120,000 / 12 months) * 6 months = BDT 60,000."
            },
            {
                question: "Which fundamental ethical principle requires a professional accountant to be straightforward and honest in all professional and business relationships?",
                options: [
                    "Objectivity",
                    "Professional Competence and Due Care",
                    "Confidentiality",
                    "Integrity"
                ],
                answer: ["D"],
                type: "single",
                topic: "Ethical considerations",
                explanation: "The ICAEW Code of Ethics defines 'Integrity' as the principle of being straightforward and honest in all professional and business relationships."
            },
            {
                question: "Which of the following is NOT a component of a complete set of financial statements as per IAS 1?",
                options: [
                    "Statement of Financial Position",
                    "Statement of Cash Flows",
                    "Director's Report",
                    "Statement of Changes in Equity"
                ],
                answer: ["C"],
                type: "single",
                topic: "The main financial statements",
                explanation: "IAS 1 defines a complete set of financial statements to include the Statement of Financial Position, Statement of Profit or Loss and Other Comprehensive Income, Statement of Changes in Equity, Statement of Cash Flows, and Notes. The Director's Report, while important, is considered outside the scope of the financial statements themselves."
            },
            {
                question: "Information is considered ________ if omitting, misstating or obscuring it could reasonably be expected to influence the decisions of users.",
                options: [
                    "prudent",
                    "material",
                    "verifiable",
                    "neutral"
                ],
                answer: ["B"],
                type: "fill",
                topic: "Qualitative characteristics",
                explanation: "This is the definition of 'Materiality' as per IAS 1 (para. 7). Materiality is an entity-specific aspect of relevance and depends on the size and nature of the item."
            },
             {
                question: "The business entity concept means that the business is treated as being separate from its owners.",
                options: ["True", "False"],
                answer: ["A"],
                type: "true_false",
                topic: "Accounting concepts and conventions",
                explanation: "The business entity concept is a fundamental accounting principle that states a business is an entity separate and distinct from its owners, regardless of its legal form (sole trader, partnership, or company)."
            },
            {
                question: "Which of the following are examples of 'dependencies' in the context of sustainability reporting? (Choose MULTIPLE correct answers)",
                options: [
                    "Greenhouse gas emissions from a factory.",
                    "A company's reliance on a stable climate for its agricultural operations.",
                    "A tech company's need for a skilled and diverse workforce.",
                    "Waste produced during the manufacturing process."
                ],
                answer: ["B", "C"],
                type: "multiple",
                topic: "Sustainability and sustainability standards",
                explanation: "'Dependencies' refer to how a company's ability to create value is affected by environmental, social, and governance factors. Reliance on a stable climate and a skilled workforce are dependencies. Greenhouse gas emissions and waste are 'impacts' the company has on the environment."
            },
            {
                question: "A company's statement of financial position shows assets of BDT 5,000,000 and equity of BDT 2,000,000. What is the value of its liabilities?",
                options: [
                    "BDT 7,000,000",
                    "BDT 3,000,000",
                    "BDT 2,000,000",
                    "Cannot be determined"
                ],
                answer: ["B"],
                type: "calculation",
                topic: "The main financial statements",
                explanation: "The fundamental accounting equation is Assets = Liabilities + Equity. Therefore, Liabilities = Assets - Equity. Liabilities = BDT 5,000,000 - BDT 2,000,000 = BDT 3,000,000."
            },
            {
                question: "Which of the following stakeholders would be most interested in the long-term stability and profitability of a company to ensure job security and retirement benefits?",
                options: [
                    "Suppliers",
                    "Customers",
                    "Employees and their representative groups",
                    "Government agencies"
                ],
                answer: ["C"],
                type: "single",
                topic: "Purpose of accounting information",
                explanation: "Employees and their representative groups (like trade unions) need information about the stability and profitability of their employers to assess the entityâ€™s ability to provide remuneration, retirement benefits, and continued employment opportunities."
            },
            {
                question: "Allowing bias or conflict of interest to override professional judgement would be a breach of which fundamental ethical principle?",
                options: [
                    "Integrity",
                    "Objectivity",
                    "Confidentiality",
                    "Professional Behaviour"
                ],
                answer: ["B"],
                type: "single",
                topic: "Ethical considerations",
                explanation: "The principle of 'Objectivity' requires a professional accountant not to allow bias, conflict of interest, or undue influence of others to override their professional or business judgements."
            },
            {
                question: "All of the following are classified as revenue expenditure EXCEPT:",
                options: [
                    "Wages of machine operators",
                    "Cost of adding an extension to a factory building",
                    "Annual maintenance contract for office computers",
                    "Purchase of raw materials for production"
                ],
                answer: ["B"],
                type: "single",
                topic: "Capital and revenue items",
                explanation: "Adding an extension to a factory is a capital expenditure because it enhances the earning capacity of the non-current asset. The other options are all related to day-to-day trading operations or maintaining existing assets, making them revenue expenditures."
            },
            {
                question: "The historical cost convention means that assets are always recorded at their current market value.",
                options: ["True", "False"],
                answer: ["B"],
                type: "true_false",
                topic: "Accounting concepts and conventions",
                explanation: "False. The historical cost convention states that assets are initially recorded at the amount paid to acquire them. While some assets may be revalued later, the primary basis is historical cost, which is valued for its objectivity."
            },
            {
                question: "The qualitative characteristic of 'Verifiability' helps to assure users that:",
                options: [
                    "The information is available in time to influence decisions.",
                    "The information can be compared with that of other entities.",
                    "Different knowledgeable observers could reach a consensus that the information is a faithful representation.",
                    "The information is easy to understand for all users."
                ],
                answer: ["C"],
                type: "single",
                topic: "Qualitative characteristics",
                explanation: "Verifiability means that different knowledgeable and independent observers could reach a consensus, although not necessarily complete agreement, that a particular depiction is a faithful representation. It confirms that the information is supportable."
            },
            {
                question: "Which body is responsible for setting International Financial Reporting Standards (IFRS)?",
                options: [
                    "Financial Reporting Council (FRC)",
                    "International Federation of Accountants (IFAC)",
                    "International Accounting Standards Board (IASB)",
                    "International Sustainability Standards Board (ISSB)"
                ],
                answer: ["C"],
                type: "single",
                topic: "Regulation of accounting",
                explanation: "The International Accounting Standards Board (IASB) is the independent, standard-setting body of the IFRS Foundation responsible for the development and publication of IFRS Accounting Standards."
            },
            {
                question: "A company sells goods on credit for BDT 50,000 in December. The cash is received in January of the next year. According to the accrual basis, in which month should the revenue be recognized?",
                options: [
                    "January, when the cash is received.",
                    "December, when the sale was made.",
                    "Spread evenly over December and January.",
                    "None of the above."
                ],
                answer: ["B"],
                type: "single",
                topic: "Accounting concepts and conventions",
                explanation: "The accrual basis of accounting requires that transactions are recorded in the period in which they occur (when the revenue is earned), not when the cash is received. Therefore, the revenue should be recognized in December."
            },
            // --- Scenario Based Questions Start ---
            {
                question: `
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                        <h4 class="font-semibold mb-2">Scenario: Alpha Trading Ltd.</h4>
                        <p class="text-sm">Alpha Trading Ltd., a company based in Dhaka, started its business on January 1, 2024. During its first quarter (ending March 31, 2024), the following events occurred:</p>
                        <ul class="list-disc list-inside text-sm space-y-1 mt-2">
                            <li>Purchased a warehouse for BDT 10,000,000. Legal fees for the purchase amounted to BDT 200,000.</li>
                            <li>Spent BDT 50,000 on repairing a leaking roof in the newly purchased warehouse.</li>
                            <li>Purchased goods for resale for BDT 1,500,000 on credit.</li>
                            <li>Paid salaries to employees amounting to BDT 300,000.</li>
                            <li>Sold an old office desk, which was part of the original property purchase, for BDT 15,000 cash. The desk was considered to have a zero value in the property allocation.</li>
                        </ul>
                        <p class="text-sm mt-2">Based on this scenario, answer the following question.</p>
                    </div>
                    <p class="mt-4">What is the total amount of capital expenditure for Alpha Trading Ltd. in the first quarter?</p>
                `,
                options: [
                    "BDT 10,000,000",
                    "BDT 10,050,000",
                    "BDT 10,200,000",
                    "BDT 10,250,000"
                ],
                answer: ["C"],
                type: "scenario",
                topic: "Capital and revenue items",
                explanation: "Capital expenditure includes the cost of acquiring a non-current asset plus any costs to bring it to its intended use. Here, it is the purchase price of the warehouse (BDT 10,000,000) + legal fees (BDT 200,000) = BDT 10,200,000. The roof repair is revenue expenditure (maintenance). The purchase of goods and salaries are also revenue expenditures."
            },
            {
                question: `
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                        <h4 class="font-semibold mb-2">Scenario: Alpha Trading Ltd. (Continued)</h4>
                        <p class="text-sm">Refer to the scenario for Alpha Trading Ltd. provided previously.</p>
                    </div>
                    <p class="mt-4">What is the total amount of revenue expenditure for Alpha Trading Ltd. in the first quarter?</p>
                `,
                options: [
                    "BDT 1,800,000",
                    "BDT 1,850,000",
                    "BDT 350,000",
                    "BDT 1,500,000"
                ],
                answer: ["B"],
                type: "scenario",
                topic: "Capital and revenue items",
                explanation: "Revenue expenditure is incurred for trade purposes or to maintain assets. This includes the roof repair (BDT 50,000), purchase of goods for resale (BDT 1,500,000), and salaries (BDT 300,000). Total revenue expenditure = 50,000 + 1,500,000 + 300,000 = BDT 1,850,000."
            },
            {
                question: `
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                        <h4 class="font-semibold mb-2">Scenario: Alpha Trading Ltd. (Continued)</h4>
                        <p class="text-sm">Refer to the scenario for Alpha Trading Ltd. provided previously.</p>
                    </div>
                    <p class="mt-4">How should the sale of the old office desk for BDT 15,000 be classified?</p>
                `,
                options: [
                    "Revenue income",
                    "Capital income",
                    "A reduction in capital expenditure",
                    "A liability"
                ],
                answer: ["B"],
                type: "scenario",
                topic: "Capital and revenue items",
                explanation: "Capital income is the proceeds from the sale of non-current assets. Since the desk is a non-current asset (even at zero value), the proceeds from its sale are classified as capital income. The profit on this sale (BDT 15,000) would be reported in the statement of profit or loss."
            },
            // --- More Questions ---
            {
                question: "Which of the following describes the 'offsetting' principle under IAS 1?",
                options: [
                    "Assets and liabilities should always be netted off against each other.",
                    "Income and expenses can be offset if they arise from similar transactions and are material.",
                    "Assets and liabilities, and income and expenses, should not be offset unless required or permitted by an IFRS.",
                    "All of the above."
                ],
                answer: ["C"],
                type: "single",
                topic: "Accounting concepts and conventions",
                explanation: "IAS 1 does not allow offsetting of assets/liabilities or income/expenses unless a specific IFRS requires or permits it. This ensures that the financial statements provide a complete picture of the entity's financial position and performance."
            },
            {
                question: "A professional accountant has a continuing duty to maintain professional knowledge and skill. This relates to which fundamental ethical principle?",
                options: [
                    "Integrity",
                    "Objectivity",
                    "Professional Competence and Due Care",
                    "Professional Behaviour"
                ],
                answer: ["C"],
                type: "single",
                topic: "Ethical considerations",
                explanation: "The principle of 'Professional Competence and Due Care' imposes a duty on accountants to maintain their knowledge and skills at a level required to provide competent service and to act diligently in accordance with applicable standards."
            },
            {
                question: "Which statement best describes equity?",
                options: [
                    "The total assets of the business.",
                    "The amount owed to third parties.",
                    "The residual interest in the assets of the entity after deducting all its liabilities.",
                    "The cash generated by the business in a period."
                ],
                answer: ["C"],
                type: "single",
                topic: "The main financial statements",
                explanation: "The Conceptual Framework (para. 4.63) defines equity as 'the residual interest in the assets of the entity after deducting all its liabilities'. It represents the owners' claim on the net assets of the business."
            },
            {
                question: "In Bangladesh, non-listed companies generally follow accounting standards that are substantially converged with IFRS, known as BFRS (Bangladesh Financial Reporting Standards).",
                options: ["True", "False"],
                answer: ["A"],
                type: "true_false",
                topic: "Regulation of accounting",
                explanation: "True. While listed companies must comply with IFRS, non-listed companies in Bangladesh follow BFRS, which are issued by the Institute of Chartered Accountants of Bangladesh (ICAB) and are largely based on IFRS, with some modifications for the local context."
            },
            {
                question: "Which of the following would be a primary concern for a supplier evaluating a company's financial statements?",
                options: [
                    "The company's dividend policy.",
                    "The company's ability to pay its debts as they fall due.",
                    "The company's long-term growth prospects.",
                    "The remuneration of the company's directors."
                ],
                answer: ["B"],
                type: "single",
                topic: "Purpose of accounting information",
                explanation: "Suppliers provide goods and services on credit, so their primary concern is the company's liquidity and ability to pay its debts (liabilities) in the short term. They are interested in the company's ability to settle its trade payables."
            },
            {
                question: "If financial information is presented in a clear and concise manner, it enhances which qualitative characteristic?",
                options: [
                    "Verifiability",
                    "Timeliness",
                    "Comparability",
                    "Understandability"
                ],
                answer: ["D"],
                type: "single",
                topic: "Qualitative characteristics",
                explanation: "Understandability is the characteristic that is enhanced when information is classified, characterized, and presented clearly and concisely, making it comprehensible to users with a reasonable knowledge of business."
            },
            {
                question: "A company purchases a machine for BDT 500,000. The delivery cost is BDT 10,000 and the installation cost is BDT 15,000. The wages of the staff who operate the machine for the first month are BDT 20,000. What is the capitalised cost of the machine?",
                options: [
                    "BDT 500,000",
                    "BDT 510,000",
                    "BDT 525,000",
                    "BDT 545,000"
                ],
                answer: ["C"],
                type: "calculation",
                topic: "Capital and revenue items",
                explanation: "The capitalised cost includes the purchase price and all costs necessary to bring the asset to its working condition. This is BDT 500,000 (purchase) + BDT 10,000 (delivery) + BDT 15,000 (installation) = BDT 525,000. The operator's wages are a revenue expense."
            },
            {
                question: "The 'prudence' concept, which supports neutrality, means that:",
                options: [
                    "Assets and income should always be overstated.",
                    "Assets and income are not overstated, and liabilities and expenses are not understated.",
                    "Liabilities and expenses should always be understated.",
                    "Profits should be recognized as early as possible."
                ],
                answer: ["B"],
                type: "single",
                topic: "Qualitative characteristics",
                explanation: "Prudence is the exercise of caution when making judgements under conditions of uncertainty. It means not overstating assets or income and not understating liabilities or expenses, which supports the neutrality of financial information."
            },
            {
                question: "Which of the following is an example of an 'impact' in sustainability reporting?",
                options: [
                    "A company's dependency on water for its production process.",
                    "The amount of CO2 emissions generated by a company's operations.",
                    "The risk to a company's supply chain from climate change.",
                    "A company's need for a positive brand reputation."
                ],
                answer: ["B"],
                type: "single",
                topic: "Sustainability and sustainability standards",
                explanation: "'Impacts' are the effects a company's activities have on the environment and society. CO2 emissions are a direct environmental impact. The other options are examples of dependencies or risks."
            },
            {
                question: "The consistency of presentation principle in IAS 1 means that the classification of items in the financial statements should never be changed.",
                options: ["True", "False"],
                answer: ["B"],
                type: "true_false",
                topic: "Accounting concepts and conventions",
                explanation: "False. The principle requires presentation to stay the same from one period to the next to enhance comparability, but it can be changed if there is a significant change in the nature of operations or if a new IFRS requires a different presentation."
            },
            {
                question: "A junior accountant is asked by her manager to record a sale in December, even though the goods will only be delivered in February of the next year. The manager says this is to 'help meet the annual sales target'. Complying with this request would primarily breach which two ethical principles? (Choose MULTIPLE correct answers)",
                options: [
                    "Integrity",
                    "Objectivity",
                    "Confidentiality",
                    "Professional Behaviour"
                ],
                answer: ["A", "B"],
                type: "multiple",
                topic: "Ethical considerations",
                explanation: "Complying would breach 'Integrity' (not being straightforward and honest) and 'Objectivity' (allowing the manager's undue influence to override professional judgement). The premature revenue recognition would not be a faithful representation of the transaction."
            },
            {
                question: "The statement of profit or loss shows the financial position of an entity at a specific point in time.",
                options: ["True", "False"],
                answer: ["B"],
                type: "true_false",
                topic: "The main financial statements",
                explanation: "False. The statement of profit or loss shows the financial performance over a period of time (e.g., a year). The statement of financial position shows the financial position at a specific point in time."
            },
            {
                question: "Which of the following is NOT a reason for preparing financial statements?",
                options: [
                    "To help users make decisions about providing resources to the entity.",
                    "To show the result of managementâ€™s stewardship of the resources entrusted to it.",
                    "To provide detailed budgets and forecasts for internal management use.",
                    "To assist users in predicting the entityâ€™s future cash flows."
                ],
                answer: ["C"],
                type: "single",
                topic: "Purpose of accounting information",
                explanation: "Financial statements are general-purpose reports for external users. Detailed budgets and forecasts are part of management accounting, which is prepared for internal use and is not a primary objective of the external financial statements."
            },
            {
                question: "The Companies Act, 1994 in Bangladesh is a key piece of legislation that governs the preparation and presentation of financial statements for companies.",
                options: ["True", "False"],
                answer: ["A"],
                type: "true_false",
                topic: "Regulation of accounting",
                explanation: "True. The Companies Act, 1994 sets out the legal requirements for companies in Bangladesh, including the requirement to prepare and publish annual financial statements that give a true and fair view."
            },
            {
                question: "A company has trade receivables of BDT 100,000 and trade payables of BDT 80,000. According to the principle of offsetting, how should these be presented on the statement of financial position?",
                options: [
                    "A net asset of 'Receivables' for BDT 20,000.",
                    "A net liability of 'Payables' for BDT 20,000.",
                    "An asset of 'Trade Receivables' for BDT 100,000 and a separate liability of 'Trade Payables' for BDT 80,000.",
                    "They should not be presented on the statement of financial position."
                ],
                answer: ["C"],
                type: "single",
                topic: "Accounting concepts and conventions",
                explanation: "IAS 1 prohibits offsetting assets and liabilities. Therefore, trade receivables (an asset) and trade payables (a liability) must be presented separately on the face of the statement of financial position."
            },
            {
                question: "Which of the following items would be classified as revenue income?",
                options: [
                    "Proceeds from the sale of a factory building.",
                    "A new loan received from a bank.",
                    "Cash received from the sale of goods held in inventory.",
                    "Additional capital invested by the owner."
                ],
                answer: ["C"],
                type: "single",
                topic: "Capital and revenue items",
                explanation: "Revenue income is derived from the principal revenue-producing activities of the entity, such as the sale of trading assets (inventory). Sale of a factory is capital income, a bank loan is a liability, and owner's investment is equity."
            },
            {
                question: "The Conceptual Framework states that financial information can make a difference to decisions if it has predictive value, confirmatory value, or both. This relates to which fundamental qualitative characteristic?",
                options: [
                    "Faithful Representation",
                    "Relevance",
                    "Comparability",
                    "Verifiability"
                ],
                answer: ["B"],
                type: "single",
                topic: "Qualitative characteristics",
                explanation: "Relevant financial information is capable of making a difference in decisions made by users. It has this capability if it has predictive value (helps in forecasting future outcomes) and/or confirmatory value (provides feedback on past evaluations)."
            },
            // --- Scenario 2 ---
            {
                question: `
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                        <h4 class="font-semibold mb-2">Scenario: Creative Designs Ltd.</h4>
                        <p class="text-sm">Creative Designs Ltd. is preparing its financial statements for the year ended December 31, 2024. The chief accountant is unsure about the following items:</p>
                        <ul class="list-disc list-inside text-sm space-y-1 mt-2">
                            <li>Item 1: The company spent BDT 500,000 on a major advertising campaign in November 2024. The marketing director argues this is an investment that will generate sales for the next 2-3 years and should be treated as an asset.</li>
                            <li>Item 2: A key customer who owes BDT 200,000 has been declared bankrupt. There is no realistic prospect of recovery. The finance director wants to wait until next year to write this off as it will negatively impact the current year's profit.</li>
                        </ul>
                        <p class="text-sm mt-2">Based on this scenario, answer the following question.</p>
                    </div>
                    <p class="mt-4">Applying the accrual basis of accounting, how should the BDT 500,000 advertising campaign cost be treated in the 2024 financial statements?</p>
                `,
                answer: ["C"],
                options: [
                    "As a non-current asset, depreciated over 3 years.",
                    "As a current asset, to be expensed next year.",
                    "As a revenue expense in the statement of profit or loss for 2024.",
                    "It should not be recorded until the sales are generated."
                ],
                type: "scenario",
                topic: "Accounting concepts and conventions",
                explanation: "Despite the potential for future benefits, advertising expenditure is typically treated as a revenue expense in the period it is incurred. This is because it is difficult to reliably measure the future economic benefits that will flow to the entity. Under the accrual concept, the expense is recognized when incurred, which is in 2024."
            },
            {
                question: `
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                        <h4 class="font-semibold mb-2">Scenario: Creative Designs Ltd. (Continued)</h4>
                        <p class="text-sm">Refer to the scenario for Creative Designs Ltd. provided previously.</p>
                    </div>
                    <p class="mt-4">The finance director's suggestion to delay writing off the BDT 200,000 bad debt would violate which of the following principles/characteristics? (Choose MULTIPLE correct answers)</p>
                `,
                answer: ["A", "D"],
                options: [
                    "Faithful Representation",
                    "Going Concern",
                    "Consistency",
                    "Prudence"
                ],
                type: "scenario",
                topic: "Qualitative characteristics",
                explanation: "Delaying the write-off would violate 'Faithful Representation' because the financial statements would not accurately depict the economic reality (the receivable is worthless). It would also violate 'Prudence' (a support for neutrality), which requires caution and means liabilities/expenses should not be understated. The expense should be recognized in the period it becomes known."
            },
            {
                question: "Which of these is NOT an interest of the government and its agencies in a company's financial statements?",
                options: [
                    "To assess tax liabilities.",
                    "To provide a basis for national statistics.",
                    "To determine the appropriate dividend payment to shareholders.",
                    "To ensure compliance with regulations like the Companies Act, 1994."
                ],
                answer: ["C"],
                type: "single",
                topic: "Purpose of accounting information",
                explanation: "Determining dividend payments is a decision for the company's directors and shareholders. Government agencies are interested in taxation, statistics, and regulatory compliance, not the company's internal dividend policy."
            },
            {
                question: "The primary purpose of accounting standards is to:",
                options: [
                    "Eliminate the need for professional judgement in accounting.",
                    "Ensure all companies are profitable.",
                    "Reduce the subjectivity in accounting and enhance comparability between entities.",
                    "Simplify the accounting process for small businesses."
                ],
                answer: ["C"],
                type: "single",
                topic: "Regulation of accounting",
                explanation: "Accounting standards are developed to deal with subjectivity and achieve comparability between different organizations. They provide a framework of rules and principles to ensure that financial statements are prepared on a consistent basis."
            },
            {
                question: "A company receives BDT 24,000 in January 2024 for services to be provided evenly over the next 12 months. What is the revenue recognized in the statement of profit or loss for the quarter ended March 31, 2024?",
                options: [
                    "BDT 24,000",
                    "BDT 2,000",
                    "BDT 6,000",
                    "BDT 0"
                ],
                answer: ["C"],
                type: "calculation",
                topic: "Accounting concepts and conventions",
                explanation: "Under the accrual concept, revenue is recognized as it is earned. The total revenue is BDT 24,000 for 12 months, which is BDT 2,000 per month. For the first quarter (Jan, Feb, Mar), the company has earned 3 months of revenue. Therefore, recognized revenue is 3 * BDT 2,000 = BDT 6,000."
            },
            {
                question: "Using confidential information acquired through a professional relationship for personal advantage is a breach of the principle of Confidentiality.",
                options: ["True", "False"],
                answer: ["A"],
                type: "true_false",
                topic: "Ethical considerations",
                explanation: "True. The principle of Confidentiality explicitly states that a professional accountant should not use confidential information acquired as a result of professional and business relationships for their personal advantage or the advantage of third parties."
            },
            {
                question: "Which of the following would be presented in the Statement of Changes in Equity?",
                options: [
                    "Purchase of new machinery",
                    "Payment to suppliers",
                    "Profit for the period and dividends paid",
                    "Cash received from customers"
                ],
                answer: ["C"],
                type: "single",
                topic: "The main financial statements",
                explanation: "The Statement of Changes in Equity reconciles the opening and closing equity of a company. It shows items like profit or loss for the period, other comprehensive income, transactions with owners (e.g., share issues, dividends), and the effects of changes in accounting policies."
            },
            {
                question: "Which of the following statements about the ICAEW Code of Ethics is correct?",
                options: [
                    "It is a rules-based system with strict regulations for every possible situation.",
                    "It only applies to chartered accountants working in public practice (audit firms).",
                    "It is a principles-based system that requires accountants to follow the spirit as well as the letter of the guidance.",
                    "All of the above."
                ],
                answer: ["C"],
                type: "single",
                topic: "Ethical considerations",
                explanation: "The ICAEW Code of Ethics is a principles-based framework. This means it is not just a checklist of rules but requires professional accountants to apply the fundamental principles to every situation and follow the spirit of the guidance."
            },
            {
                question: "A company is facing significant financial difficulties and its directors have concluded that there is no realistic alternative but to cease trading within the next six months. The financial statements should be prepared on the:",
                options: [
                    "Going concern basis",
                    "Accrual basis",
                    "Historical cost basis",
                    "Break-up basis"
                ],
                answer: ["D"],
                type: "single",
                topic: "Accounting concepts and conventions",
                explanation: "When an entity is no longer a going concern, the financial statements must be prepared on a different basis, such as the 'break-up' basis. On this basis, assets are valued at their net realizable value (what they could be sold for in a forced sale)."
            },
            {
                question: "The cost of repainting an office building to restore it to its original condition is a capital expenditure.",
                options: ["True", "False"],
                answer: ["B"],
                type: "true_false",
                topic: "Capital and revenue items",
                explanation: "False. This is a revenue expenditure. It is a maintenance cost that restores the asset's condition but does not improve or enhance its earning capacity."
            }
        ];


        let currentQuestionIndex = 0;
        let userAnswers = new Array(quizData.length).fill(null);
        let flaggedQuestions = new Array(quizData.length).fill(false);
        let timerInterval;

        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results-container');
        const questionTracker = document.getElementById('question-tracker');
        const questionDisplay = document.getElementById('question-display');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const flagBtn = document.getElementById('flag-btn');
        const submitBtn = document.getElementById('submit-btn');
        const retakeBtn = document.getElementById('retake-btn');
        const timerEl = document.getElementById('timer');

        function startQuiz() {
            currentQuestionIndex = 0;
            userAnswers.fill(null);
            flaggedQuestions.fill(false);
            quizContainer.classList.remove('hidden');
            resultsContainer.classList.add('hidden');
            
            buildQuestionTracker();
            displayQuestion(currentQuestionIndex);
            startTimer();
        }

        function startTimer() {
            let time = 45 * 60; // 45 minutes in seconds
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                const minutes = Math.floor(time / 60);
                let seconds = time % 60;
                seconds = seconds < 10 ? '0' + seconds : seconds;
                timerEl.textContent = `Time Left: ${minutes}:${seconds}`;
                time--;
                if (time < 0) {
                    clearInterval(timerInterval);
                    alert("Time's up!");
                    submitQuiz();
                }
            }, 1000);
        }

        function buildQuestionTracker() {
            questionTracker.innerHTML = '';
            quizData.forEach((_, index) => {
                const trackerItem = document.createElement('div');
                trackerItem.textContent = index + 1;
                trackerItem.classList.add('question-tracker-item', 'w-8', 'h-8', 'flex', 'items-center', 'justify-center', 'rounded-md', 'font-semibold', 'border');
                updateTrackerItemClass(trackerItem, index);
                trackerItem.addEventListener('click', () => {
                    currentQuestionIndex = index;
                    displayQuestion(currentQuestionIndex);
                });
                questionTracker.appendChild(trackerItem);
            });
        }

        function updateTrackerItemClass(item, index) {
            item.classList.remove('bg-white', 'text-slate-700', 'border-slate-300', 'bg-green-200', 'text-green-800', 'border-green-400', 'bg-red-200', 'text-red-800', 'border-red-400');

            if (flaggedQuestions[index]) {
                item.classList.add('bg-red-200', 'text-red-800', 'border-red-400');
            } else if (userAnswers[index] !== null) {
                item.classList.add('bg-green-200', 'text-green-800', 'border-green-400');
            } else {
                item.classList.add('bg-white', 'text-slate-700', 'border-slate-300');
            }
        }

        function displayQuestion(index) {
            const question = quizData[index];
            let optionsHtml = '';

            if (question.type === 'true_false') {
                optionsHtml = `
                    <div class="space-y-3">
                        ${['True', 'False'].map((option, i) => `
                            <div>
                                <input type="radio" id="option${i}" name="option" value="${option.charAt(0)}" class="hidden option-input">
                                <label for="option${i}" class="option-label">${option}</label>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else if (question.type === 'multiple') {
                 optionsHtml = `
                    <p class="text-sm text-slate-500 mb-4">Choose MULTIPLE correct answers.</p>
                    <div class="space-y-3">
                        ${question.options.map((option, i) => `
                            <div>
                                <input type="checkbox" id="option${i}" name="option" value="${String.fromCharCode(65 + i)}" class="hidden option-input">
                                <label for="option${i}" class="option-label">
                                    <span class="font-bold mr-3">${String.fromCharCode(65 + i)}.</span> ${option}
                                </label>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else { // single, fill, calculation, scenario
                 optionsHtml = `
                    <div class="space-y-3">
                        ${question.options.map((option, i) => `
                            <div>
                                <input type="radio" id="option${i}" name="option" value="${String.fromCharCode(65 + i)}" class="hidden option-input">
                                <label for="option${i}" class="option-label">
                                    <span class="font-bold mr-3">${String.fromCharCode(65 + i)}.</span> ${option}
                                </label>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            questionDisplay.innerHTML = `
                <p class="text-lg font-medium mb-1">Question ${index + 1} of ${quizData.length} <span class="text-sm font-normal text-slate-500">(2 Marks)</span></p>
                <div class="text-base text-slate-700 mb-6">${question.question}</div>
                ${optionsHtml}
            `;

            // Restore previous answer
            const savedAnswer = userAnswers[index];
            if (savedAnswer) {
                if (Array.isArray(savedAnswer)) {
                    savedAnswer.forEach(ans => {
                        const input = document.querySelector(`input[value="${ans}"]`);
                        if(input) input.checked = true;
                    });
                } else {
                    const input = document.querySelector(`input[value="${savedAnswer}"]`);
                    if(input) input.checked = true;
                }
            }

            // Add event listeners
            document.querySelectorAll('input[name="option"]').forEach(input => {
                input.addEventListener('change', handleAnswerSelection);
            });

            updateNavButtons();
            updateFlagButton();
        }
        
        function handleAnswerSelection() {
            const question = quizData[currentQuestionIndex];
            if (question.type === 'multiple') {
                const selected = Array.from(document.querySelectorAll('input[name="option"]:checked')).map(el => el.value);
                userAnswers[currentQuestionIndex] = selected.length > 0 ? selected : null;
            } else if (question.type === 'true_false') {
                 const selected = document.querySelector('input[name="option"]:checked');
                 userAnswers[currentQuestionIndex] = selected ? selected.value : null;
            }
            else {
                const selected = document.querySelector('input[name="option"]:checked');
                userAnswers[currentQuestionIndex] = selected ? selected.value : null;
            }
            updateTrackerItemClass(questionTracker.children[currentQuestionIndex], currentQuestionIndex);
        }

        function updateNavButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            if (currentQuestionIndex === quizData.length - 1) {
                nextBtn.textContent = 'Finish';
            } else {
                nextBtn.textContent = 'Next';
            }
        }
        
        function updateFlagButton() {
            if (flaggedQuestions[currentQuestionIndex]) {
                flagBtn.classList.add('bg-red-500', 'text-white');
                flagBtn.classList.remove('bg-amber-100', 'text-amber-700');
                flagBtn.innerHTML = 'ðŸš© Unflag';
            } else {
                flagBtn.classList.remove('bg-red-500', 'text-white');
                flagBtn.classList.add('bg-amber-100', 'text-amber-700');
                flagBtn.innerHTML = 'ðŸš© Flag for Review';
            }
        }

        prevBtn.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion(currentQuestionIndex);
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                displayQuestion(currentQuestionIndex);
            } else {
                submitQuiz();
            }
        });
        
        flagBtn.addEventListener('click', () => {
            flaggedQuestions[currentQuestionIndex] = !flaggedQuestions[currentQuestionIndex];
            updateFlagButton();
            updateTrackerItemClass(questionTracker.children[currentQuestionIndex], currentQuestionIndex);
        });

        submitBtn.addEventListener('click', () => {
            const unanswered = userAnswers.filter(a => a === null).length;
            if (unanswered > 0) {
                if (confirm(`You have ${unanswered} unanswered questions. Are you sure you want to submit?`)) {
                    submitQuiz();
                }
            } else {
                 if (confirm(`Are you sure you want to submit the quiz?`)) {
                    submitQuiz();
                }
            }
        });
        
        retakeBtn.addEventListener('click', startQuiz);

        function submitQuiz() {
            clearInterval(timerInterval);
            quizContainer.classList.add('hidden');
            resultsContainer.classList.remove('hidden');
            displayResults();
            window.scrollTo(0, 0);
        }

        function displayResults() {
            let correctCount = 0;
            const topicMistakes = {};

            quizData.forEach((q, i) => {
                const userAnswer = userAnswers[i];
                let isCorrect = false;

                if (q.type === 'multiple') {
                    if(userAnswer && userAnswer.length === q.answer.length) {
                        isCorrect = q.answer.every(ans => userAnswer.includes(ans));
                    }
                } else if (q.type === 'true_false') {
                    if (userAnswer) {
                       isCorrect = (userAnswer === 'T' && q.answer[0] === 'A') || (userAnswer === 'F' && q.answer[0] === 'B');
                    }
                }
                else {
                    if(userAnswer) {
                        isCorrect = userAnswer === q.answer[0];
                    }
                }

                if (isCorrect) {
                    correctCount++;
                } else {
                    if (topicMistakes[q.topic]) {
                        topicMistakes[q.topic]++;
                    } else {
                        topicMistakes[q.topic] = 1;
                    }
                }
            });

            const totalQuestions = quizData.length;
            const incorrectCount = totalQuestions - correctCount;
            const score = correctCount * 2;
            const totalMarks = totalQuestions * 2;
            const percentageCorrect = ((correctCount / totalQuestions) * 100).toFixed(2);
            const percentageIncorrect = ((incorrectCount / totalQuestions) * 100).toFixed(2);

            document.getElementById('total-score').textContent = `${score} / ${totalMarks}`;
            document.getElementById('correct-answers').textContent = `${correctCount} / ${totalQuestions}`;
            document.getElementById('incorrect-answers').textContent = `${incorrectCount} / ${totalQuestions}`;
            document.getElementById('percentage-correct').textContent = `${percentageCorrect}%`;
            document.getElementById('percentage-incorrect').textContent = `${percentageIncorrect}%`;

            const improvementAreasEl = document.getElementById('improvement-areas');
            improvementAreasEl.innerHTML = '';
            const sortedMistakes = Object.entries(topicMistakes).sort(([,a],[,b]) => b-a);

            if (sortedMistakes.length > 0) {
                improvementAreasEl.innerHTML = '<p class="font-semibold mb-2">Based on your answers, focus on these topics:</p>' +
                    '<ul class="list-disc list-inside">' +
                    sortedMistakes.map(([topic, count]) => `<li><strong>${topic}</strong> (${count} incorrect)</li>`).join('') +
                    '</ul>';
            } else {
                improvementAreasEl.innerHTML = '<p class="font-semibold">Excellent work! You answered all questions correctly.</p>';
            }

            displayAnswerReview();
        }

        function displayAnswerReview() {
            const answerReviewEl = document.getElementById('answer-review');
            answerReviewEl.innerHTML = '';

            quizData.forEach((q, i) => {
                const userAnswer = userAnswers[i];
                let isCorrect = false;
                let correctAnswerText = '';
                
                if (q.type === 'multiple') {
                    correctAnswerText = q.answer.join(', ');
                     if(userAnswer && userAnswer.length === q.answer.length) {
                        isCorrect = q.answer.every(ans => userAnswer.includes(ans));
                    }
                } else if (q.type === 'true_false') {
                    correctAnswerText = q.answer[0] === 'A' ? 'True' : 'False';
                     if (userAnswer) {
                       isCorrect = (userAnswer === 'T' && q.answer[0] === 'A') || (userAnswer === 'F' && q.answer[0] === 'B');
                    }
                }
                else {
                    correctAnswerText = q.answer[0];
                    if(userAnswer) {
                        isCorrect = userAnswer === q.answer[0];
                    }
                }

                let optionsHtml = '';
                const getOptionText = (val) => {
                    const index = val.charCodeAt(0) - 65;
                    return q.options[index];
                }

                if (q.type === 'true_false') {
                     optionsHtml = ['True', 'False'].map((opt, idx) => {
                        const val = opt.charAt(0);
                        const correctVal = q.answer[0] === 'A' ? 'T' : 'F';
                        let classes = 'option-label mt-2';
                        if (val === correctVal) classes += ' correct-answer';
                        if (userAnswer === val && !isCorrect) classes += ' incorrect-answer';
                        if (userAnswer === val) classes += ' user-selection';
                        return `<div class="${classes}">${opt}</div>`;
                    }).join('');
                } else {
                    optionsHtml = q.options.map((opt, idx) => {
                        const val = String.fromCharCode(65 + idx);
                        let classes = 'option-label mt-2';
                        if (q.answer.includes(val)) classes += ' correct-answer';
                        if (Array.isArray(userAnswer) ? userAnswer.includes(val) : userAnswer === val) {
                            if (!isCorrect) classes += ' incorrect-answer';
                            classes += ' user-selection';
                        }
                        return `<div class="${classes}"><span class="font-bold mr-3">${val}.</span> ${opt}</div>`;
                    }).join('');
                }
                
                const reviewItem = document.createElement('div');
                reviewItem.className = 'p-4 border rounded-lg';
                reviewItem.innerHTML = `
                    <p class="font-semibold">${i + 1}. ${q.question}</p>
                    <div class="my-3">${optionsHtml}</div>
                    <div class="explanation p-3 mt-4 rounded-md">
                        <p><strong>Correct Answer:</strong> ${correctAnswerText}</p>
                        <p class="mt-2"><strong>ðŸ“– Explanation:</strong> ${q.explanation}</p>
                    </div>
                `;
                answerReviewEl.appendChild(reviewItem);
            });
        }

        // Initial call to start the quiz
        startQuiz();

    </script>
</body>
</html>
